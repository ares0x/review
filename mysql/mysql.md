# mysql

## 基础

## 索引

## 应用

1. mysql 和 redis 怎样保证一致？不一致怎么解决？
   （https://juejin.cn/post/6964531365643550751）
   读取缓存一般没有什么问题（缓存过期除外），一旦涉及到数据更新，就容易出现缓存和数据库间数据一致性问题，如：

- 删除了缓存，还没来得及写库，同时另一个线程来读取发现缓存为空，则去数据库读取并写入缓存，此时缓存中为脏数据；
- 先写了库，在删除缓存前，写库的线程宕机，没有删除缓存，也会出现不一致

三个缓存模式：

- Cache-Aside Pattern：旁路缓存
  读过程：

  - 读的时候先读缓存，缓存命中直接返回数据
  - 缓存没有命中，读数据库，从数据库中取出数据放入缓存，同时返回响应

  写过程：

  - 更新时先更新数据库再删除缓存

- Read-Through / Write-Through
  跟 Cache-Aside 很相似，多了一层 cache provider
  读过程：

  - 先从缓存读取数据，读到直接返回
  - 读取不到，从数据库加载写入缓存后再返回响应

  写过程:

  - 更新数据时先更新数据库再更新缓存

- Write behind
  与 Read-Through / Write-Through 相似，由 Cache Provider 负责缓存和数据库的读写。
  不同点时，Read-Through / Write-Through 同步更新缓存和数据库，Write behind 是只更新缓存，
  不直接更新数据库，通过**批量异步**的方式更新数据库

2. mysql 的调优过程

- EXPLAIN 查询计划

2.
